<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>내배캠 최고 평점 영화 콜렉션</title>
  <link rel="stylesheet" href="./style.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
  <header>
    <h1 class="title">내배캠 최고 평점 영화 콜렉선</h1>
  </header>
  <form class="moviename">
    <label>영화검색 : </label>
    <input type="text" id="search-input" placeholder="영화를 검색해주세요.">
    <button id="search-button">검색</button>
  </form>
  <div id="movie-container"></div>

</section>
<script>
  const API_KEY = "cd3cb3639a053ef6c0cd6b8420f91761";
  const URL = `https://api.themoviedb.org/3/movie/popular?api_key=${API_KEY}&language=en-US&page=1`;

  let temp_html = "";

  fetch(URL)
    .then((response) => {
      if (!response.ok) {
        throw new Error(
          "Network response was not ok " + response.statusText
        );
      }
      return response.json();
    })
    .then((data) => {
      if (data.results && Array.isArray(data.results)) {
        const movieList = document.getElementById("movie-list");
        data.results.forEach((movie) => {
          let temp_html = `
                        <div class="movie-card" onclick="showAlert('${movie.id}')">
                            <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}" />
                            <h3>${movie.title}</h3>
                            <p>${movie.overview}</p>
                            <p>평점: ${movie.vote_average}</p>
                        </div>
                    `;
          movieList.insertAdjacentHTML("beforeend", temp_html);
        });
      } else {
        console.error("No results found or data structure is incorrect");
      }
    })
    .catch((error) => console.error("Fetch error: ", error));

  function showAlert(id) {
    alert(`"Id : " ${id}`);
  }
</script>
<script src="movie.js"></script>
</body>
</html>